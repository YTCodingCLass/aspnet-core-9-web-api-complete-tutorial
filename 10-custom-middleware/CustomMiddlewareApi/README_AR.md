# Custom Middleware ูู ASP.NET Core

![.NET](https://img.shields.io/badge/.NET-9.0-512BD4?style=flat-square&logo=dotnet)
![Middleware](https://img.shields.io/badge/Custom-Middleware-FF6B35?style=flat-square)
![Pipeline](https://img.shields.io/badge/Request-Pipeline-2E8B57?style=flat-square)

## ๐บ ููุฏูู ููุชููุจ
**๐ [ุดุงูุฏ ุฏุฑุณ Custom Middleware](#)** *(ุฃุถู ุฑุงุจุท ุงูููุฏูู ููุง)*

## ๐ฏ ุฃูุฏุงู ุงูุชุนูู

ุจููุงูุฉ ูุฐุง ุงูุฏุฑุณุ ุณุชุชูู:
- โ **Custom Middleware** - ุฅูุดุงุก ููููุงุช middleware ูุฎุตุตุฉ
- โ **Request Pipeline** - ููู ุฎุท ุฃูุงุจูุจ ุงูุทูุจุงุช ูู ASP.NET Core
- โ **ุชุฑุชูุจ Middleware** - ุงูุชุณุฌูู ุงูุตุญูุญ ูุชุฑุชูุจ ุงูุชูููุฐ ููู middleware
- โ **ูุนุงูุฌุฉ Request/Response** - ุชุนุฏูู ุทูุจุงุช ูุงุณุชุฌุงุจุงุช HTTP
- โ **Short-Circuiting** - ุฅููุงุก ุฎุท ุงูุฃูุงุจูุจ ูุจูุฑุงู ุนูุฏ ุงูุญุงุฌุฉ
- โ **Middleware ุฌุงูุฒ ููุฅูุชุงุฌ** - ุณููู middleware ูุนุชูุฏ ุนูู ุงูุจูุฆุฉ

## ๐ ูุง ูุจููู

**ูุธุงู Custom Middleware ุฌุงูุฒ ููุฅูุชุงุฌ** ููุถุญ:
- **Request Logging Middleware** - ุชุณุฌูู ุทูุจุงุช HTTP ุงููุงุฑุฏุฉ
- **Response Timing Middleware** - ููุงุณ ููุช ูุนุงูุฌุฉ ุงูุทูุจุงุช
- **Custom Header Middleware** - ุฅุถุงูุฉ headers ูุฎุตุตุฉ ููุงุณุชุฌุงุจุงุช
- **API Key Validation Middleware** - middleware ุจุณูุท ูููุตุงุฏูุฉ
- **Exception Handling Middleware** - ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุฑูุฒูุฉ
- **Request/Response Body Reading** - ูุฑุงุกุฉ ูุชุณุฌูู ูุญุชูู ุงูุทูุจุงุช ูุงูุงุณุชุฌุงุจุงุช

## ๐ ูููู ุงููุดุฑูุน

```
CustomMiddlewareApi/
โโโ Controllers/
โ   โโโ ProductsController.cs        # ููุงุท ููุงูุฉ API
โโโ Middleware/                       # โญ ููููุงุช middleware ูุฎุตุตุฉ
โ   โโโ RequestLoggingMiddleware.cs  # ุชุณุฌูู ุทูุจุงุช HTTP
โ   โโโ ResponseTimingMiddleware.cs  # ููุงุณ ููุช ุงูุงุณุชุฌุงุจุฉ
โ   โโโ CustomHeaderMiddleware.cs    # ุฅุถุงูุฉ headers ูุฎุตุตุฉ
โ   โโโ ApiKeyMiddleware.cs          # ุงูุชุญูู ูู API key
โโโ Exceptions/                       # ุฃููุงุน ุงูุงุณุชุซูุงุกุงุช ุงููุฎุตุตุฉ
โ   โโโ BaseException.cs             # ุงูุงุณุชุซูุงุก ุงูุฃุณุงุณู ูุน ููุฏ ุงูุญุงูุฉ
โ   โโโ NotFoundException.cs         # 404 ุบูุฑ ููุฌูุฏ
โ   โโโ BadRequestException.cs       # 400 ุทูุจ ุฎุงุทุฆ
โ   โโโ ValidationException.cs       # 422 ููุงู ุบูุฑ ูุงุจู ูููุนุงูุฌุฉ
โ   โโโ UnauthorizedException.cs     # 401 ุบูุฑ ูุตุฑุญ
โ   โโโ ForbiddenException.cs        # 403 ูุญุธูุฑ
โ   โโโ ConflictException.cs         # 409 ุชุนุงุฑุถ
โโโ Handlers/                         # ูุนุงูุฌุงุช ุงูุงุณุชุซูุงุกุงุช
โ   โโโ GlobalExceptionHandler.cs    # ููุชูุท ุฌููุน ุงูุงุณุชุซูุงุกุงุช ุบูุฑ ุงููุนุงูุฌุฉ
โ   โโโ BusinessExceptionHandler.cs  # ูุชุนุงูู ูุน ุงุณุชุซูุงุกุงุช ุงูุฃุนูุงู
โ   โโโ ValidationExceptionHandler.cs # ูุชุนุงูู ูุน ุฃุฎุทุงุก ุงูุชุญูู
โโโ Models/
โ   โโโ Product.cs                   # ููุงู ุงูููุชุฌ
โ   โโโ Supplier.cs                  # ููุงู ุงูููุฑุฏ
โ   โโโ DTOs/
โ       โโโ CreateProductDto.cs      # ุทูุจ ุฅูุดุงุก ุงูููุชุฌ
โ       โโโ UpdateProductDto.cs      # ุทูุจ ุชุญุฏูุซ ุงูููุชุฌ
โ       โโโ ProductResponseDto.cs    # ุงุณุชุฌุงุจุฉ ุงูููุชุฌ ูุน ุญุงูุฉ ุงููุฎุฒูู
โโโ Repositories/
โ   โโโ IProductRepository.cs        # ูุงุฌูุฉ ุงููุณุชูุฏุน
โ   โโโ ProductRepository.cs         # ุชูููุฐ ุงููุณุชูุฏุน
โโโ Services/
โ   โโโ IProductService.cs           # ูุงุฌูุฉ ุงูุฎุฏูุฉ
โ   โโโ ProductService.cs            # ุงูุฎุฏูุฉ ูุน ููุทู ุงูุชุญูู โญ
โ   โโโ INotificationService.cs      # ูุงุฌูุฉ ุฎุฏูุฉ ุงูุฅุดุนุงุฑุงุช
โ   โโโ NotificationService.cs       # ุชูููุฐ ุงูุฅุดุนุงุฑุงุช
โโโ Data/
โ   โโโ InMemoryDatabase.cs          # ูุฎุฒู ุจูุงูุงุช ูู ุงูุฐุงูุฑุฉ
โโโ Mappings/
โ   โโโ MappingProfile.cs            # ุชูููู AutoMapper
โโโ Program.cs                       # ุชุณุฌูู ูุนุงูุฌุงุช ุงูุงุณุชุซูุงุกุงุช โญ
โโโ ExceptionHandlingApi.http        # ุทูุจุงุช HTTP ููุงุฎุชุจุงุฑ
```

## ๐๏ธ ุจููุฉ ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช

### **ุชุฏูู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช**

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ            ุทูุจ HTTP (ุงููุชุญูู)                       โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
                  โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         ุทุจูุฉ ุงูุฎุฏูุฉ (ููุทู ุงูุฃุนูุงู)                 โ
โ    โข ุงูุชุญูู                                         โ
โ    โข ููุงุนุฏ ุงูุฃุนูุงู                                 โ
โ    โข ูุนุงูุฌุฉ ุงูุจูุงูุงุช                               โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
                  โ ูุฑูู ุงุณุชุซูุงุก
                  โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      UseExceptionHandler() Middleware               โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
                  โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    ุณูุณูุฉ ูุนุงูุฌุงุช ุงูุงุณุชุซูุงุกุงุช (ุงูุชุฑุชูุจ ููู!)       โ
โ    1. ValidationExceptionHandler โโ                 โ
โ    2. BusinessExceptionHandler โโโโผโโบ ุชุทุงุจูุ        โ
โ    3. GlobalExceptionHandler โโโโโโ                 โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
                  โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ    ุงุณุชุฌุงุจุฉ JSON ูุชูุงุตูู ุงููุดููุฉ RFC 7807           โ
โ    {                                                 โ
โ      "type": "...",                                  โ
โ      "title": "...",                                 โ
โ      "status": 400,                                  โ
โ      "detail": "...",                                โ
โ      "errors": {...},                                โ
โ      "errorCode": "...",                             โ
โ      "timestamp": "...",                             โ
โ      "traceId": "..."                                โ
โ    }                                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐จ ุชุณูุณู ุงูุงุณุชุซูุงุกุงุช ุงููุฎุตุต

### **ุงูุงุณุชุซูุงุก ุงูุฃุณุงุณู**
```csharp
// Exceptions/BaseException.cs
public abstract class BaseException : Exception
{
    public int StatusCode { get; }
    public string ErrorCode { get; }

    protected BaseException(string message, int statusCode, string errorCode)
        : base(message)
    {
        StatusCode = statusCode;
        ErrorCode = errorCode;
    }
}
```

### **ุงูุงุณุชุซูุงุกุงุช ุงููุญุฏุฏุฉ**

| ุงูุงุณุชุซูุงุก | ุญุงูุฉ HTTP | ููุฏ ุงูุฎุทุฃ | ุญุงูุฉ ุงูุงุณุชุฎุฏุงู |
|-----------|------------|-----------|----------------|
| `NotFoundException` | 404 | `NOT_FOUND` | ุงูููุฑุฏ ุบูุฑ ููุฌูุฏ |
| `BadRequestException` | 400 | `BAD_REQUEST` | ุจูุงูุงุช ุทูุจ ุบูุฑ ุตุงูุญุฉ ุฃู ุงูุชูุงู ูุงุนุฏุฉ ุนูู |
| `ValidationException` | 422 | `VALIDATION_ERROR` | ูุดู ุงูุชุญูู ูู ุงูุฅุฏุฎุงู (ูุน ุฃุฎุทุงุก ุนูู ูุณุชูู ุงูุญููู) |
| `UnauthorizedException` | 401 | `UNAUTHORIZED` | ุงููุตุงุฏูุฉ ูุทููุจุฉ |
| `ForbiddenException` | 403 | `FORBIDDEN` | ุฃุฐููุงุช ุบูุฑ ูุงููุฉ |
| `ConflictException` | 409 | `CONFLICT` | ุชุนุงุฑุถ ุงูููุฑุฏ (ูุซู ุงุณู ููุฑุฑ) |

### **ุฃูุซูุฉ ุนูู ุงูุงุณุชุซูุงุกุงุช**

```csharp
// ุชุญูู ุญูู ูุงุญุฏ
throw new ValidationException("Id", "ูุฌุจ ุฃู ูููู ูุนุฑู ุงูููุชุฌ ุฃูุจุฑ ูู ุตูุฑ");

// ุชุญูู ุญููู ูุชุนุฏุฏุฉ
var errors = new Dictionary<string, string[]>
{
    { "Name", ["ุงุณู ุงูููุชุฌ ูุทููุจ"] },
    { "Price", ["ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃูุจุฑ ูู ุตูุฑ"] }
};
throw new ValidationException(errors);

// ุบูุฑ ููุฌูุฏ
throw new NotFoundException("Product", id);

// ุงูุชูุงู ูุงุนุฏุฉ ุนูู
throw new BadRequestException("ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃุนูู ุจูุณุจุฉ 10% ุนูู ุงูุฃูู ูู ุณุนุฑ ุงูุชูููุฉ");

// ุชุนุงุฑุถ
throw new ConflictException($"ุงูููุชุฌ ุจุงุณู '{name}' ููุฌูุฏ ุจุงููุนู");
```

## โ๏ธ ุงูุชุญูู ูู ุทุจูุฉ ุงูุฎุฏูุฉ

### **ููู ุงูุชุญูู ูู ุงููุชุญููุงุช ุฅูู ุงูุฎุฏูุงุช**

**โ ูุจู (ุงูุชุญูู ุงููุงุฆู ุนูู ุงููุชุญูู):**
```csharp
[HttpGet("{id}")]
public async Task<ActionResult<ProductResponseDto>> GetProductById(int id)
{
    if (id <= 0)
    {
        throw new ValidationException("Id", "ูุฌุจ ุฃู ูููู ูุนุฑู ุงูููุชุฌ ุฃูุจุฑ ูู ุตูุฑ");
    }

    var product = await productService.GetProductByIdAsync(id);
    if (product == null)
    {
        throw new NotFoundException("Product", id);
    }
    return Ok(product);
}
```

**โ ุจุนุฏ (ุงูุชุญูู ุงููุงุฆู ุนูู ุงูุฎุฏูุฉ):**
```csharp
// ุงููุชุญูู - ูุญูู ููุธูู
[HttpGet("{id}")]
public async Task<ActionResult<ProductResponseDto>> GetProductById(int id)
{
    var product = await productService.GetProductByIdAsync(id);
    return Ok(product);
}

// ุงูุฎุฏูุฉ - ุชุชุนุงูู ูุน ูู ุงูุชุญูู
public async Task<ProductResponseDto> GetProductByIdAsync(int id)
{
    // ุงูุชุญูู
    if (id <= 0)
    {
        throw new ValidationException("Id", "ูุฌุจ ุฃู ูููู ูุนุฑู ุงูููุชุฌ ุฃูุจุฑ ูู ุตูุฑ");
    }

    var product = await productRepository.GetByIdWithSupplierAsync(id);
    if (product == null)
    {
        throw new NotFoundException("Product", id);
    }

    var dto = mapper.Map<ProductResponseDto>(product);
    dto.StockStatus = CalculateStockStatus(dto.StockQuantity);
    return dto;
}
```

### **ูุซุงู ุชุญูู ุดุงูู**

```csharp
private async Task ValidateProductCreationAsync(CreateProductDto createDto)
{
    var errors = new Dictionary<string, string[]>();

    // ุงูุชุญูู: ุงุณู ุงูููุชุฌ
    if (string.IsNullOrWhiteSpace(createDto.Name))
    {
        errors.Add("Name", ["ุงุณู ุงูููุชุฌ ูุทููุจ"]);
    }
    else if (createDto.Name.Length < 3)
    {
        errors.Add("Name", ["ูุฌุจ ุฃู ูููู ุงุณู ุงูููุชุฌ 3 ุฃุญุฑู ุนูู ุงูุฃูู"]);
    }
    else if (createDto.Name.Length > 100)
    {
        errors.Add("Name", ["ูุง ูููู ุฃู ูุชุฌุงูุฒ ุงุณู ุงูููุชุฌ 100 ุญุฑู"]);
    }

    // ุงูุชุญูู: ุงูุณุนุฑ
    if (createDto.Price <= 0)
    {
        errors.Add("Price", ["ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃูุจุฑ ูู ุตูุฑ"]);
    }
    else if (createDto.Price > 1000000)
    {
        errors.Add("Price", ["ูุง ูููู ุฃู ูุชุฌุงูุฒ ุงูุณุนุฑ 1,000,000"]);
    }

    // ุงูุชุญูู: ูููุฉ ุงููุฎุฒูู
    if (createDto.StockQuantity < 0)
    {
        errors.Add("StockQuantity", ["ูุง ูููู ุฃู ุชููู ูููุฉ ุงููุฎุฒูู ุณุงูุจุฉ"]);
    }

    // ุฑูู ValidationException ุฅุฐุง ูุงูุช ููุงู ุฃู ุฃุฎุทุงุก
    if (errors.Any())
    {
        throw new ValidationException(errors);
    }

    // ูุงุนุฏุฉ ุนูู: ุงูุชุญูู ูู ูุฌูุฏ ุงุณู ุงูููุชุฌ ุจุงููุนู
    var existingProducts = await productRepository.GetAllAsync();
    if (existingProducts.Any(p => p.Name.Equals(createDto.Name, StringComparison.OrdinalIgnoreCase)))
    {
        throw new ConflictException($"ุงูููุชุฌ ุจุงุณู '{createDto.Name}' ููุฌูุฏ ุจุงููุนู");
    }

    // ูุงุนุฏุฉ ุนูู: ุงูุชุญูู ูู ูุงูุด ุงูุฑุจุญ
    if (createDto.Price <= createDto.CostPrice * 1.1m)
    {
        throw new BadRequestException("ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃุนูู ุจูุณุจุฉ 10% ุนูู ุงูุฃูู ูู ุณุนุฑ ุงูุชูููุฉ");
    }
}
```

## ๐ ุชูููู Program.cs

```csharp
// ุชุณุฌูู ุฎุฏูุฉ Problem Details
builder.Services.AddProblemDetails();

// ุชุณุฌูู ูุนุงูุฌุงุช ุงูุงุณุชุซูุงุกุงุช ุจุชุฑุชูุจ ุงูุชุญุฏูุฏ
// ูุฌุจ ุชุณุฌูู ุงููุนุงูุฌุงุช ุงูุฃูุซุฑ ุชุญุฏูุฏุงู ุฃููุงู
builder.Services.AddExceptionHandler<ValidationExceptionHandler>();
builder.Services.AddExceptionHandler<BusinessExceptionHandler>();
builder.Services.AddExceptionHandler<GlobalExceptionHandler>();

// ุฎุฏูุงุช ุฃุฎุฑู...
builder.Services.AddScoped<IProductRepository, ProductRepository>();
builder.Services.AddScoped<IProductService, ProductService>();

var app = builder.Build();

// *** ููู: ุฃุถู ูุนุงูุฌ ุงูุงุณุชุซูุงุกุงุช ูู ููุช ูุจูุฑ ูู ุฎุท ุงูุฃูุงุจูุจ ***
app.UseExceptionHandler();

// ูุณูุทุฉ ุฃุฎุฑู...
app.UseSwagger();
app.UseHttpsRedirection();
app.UseAuthorization();
app.MapControllers();

app.Run();
```

## ๐ ุชูุณูู ุงุณุชุฌุงุจุฉ RFC 7807 Problem Details

### **ุงุณุชุฌุงุจุฉ ุฎุทุฃ ุงูุชุญูู (422)**
```json
{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.1",
  "title": "ุญุฏุซ ุฎุทุฃ ุชุญูู ูุงุญุฏ ุฃู ุฃูุซุฑ.",
  "status": 422,
  "detail": "ุญุฏุซ ุฎุทุฃ ุชุญูู ูุงุญุฏ ุฃู ุฃูุซุฑ.",
  "instance": "/api/products",
  "errors": {
    "Name": [
      "ุงุณู ุงูููุชุฌ ูุทููุจ"
    ],
    "Price": [
      "ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃูุจุฑ ูู ุตูุฑ"
    ],
    "Category": [
      "ุงููุฆุฉ ูุทููุจุฉ"
    ]
  },
  "errorCode": "VALIDATION_ERROR",
  "timestamp": "2025-10-18T10:30:45.123Z",
  "traceId": "00-abc123-def456-00"
}
```

### **ุงุณุชุฌุงุจุฉ ุฎุทุฃ ุบูุฑ ููุฌูุฏ (404)**
```json
{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.4",
  "title": "ุบูุฑ ููุฌูุฏ",
  "status": 404,
  "detail": "ุงูููุชุฌ ุจููุชุงุญ '999' ุบูุฑ ููุฌูุฏ.",
  "instance": "/api/products/999",
  "errorCode": "NOT_FOUND",
  "timestamp": "2025-10-18T10:30:45.123Z",
  "traceId": "00-abc123-def456-00"
}
```

### **ุงูุชูุงู ูุงุนุฏุฉ ุงูุนูู (400)**
```json
{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.1",
  "title": "ุทูุจ ุฎุงุทุฆ",
  "status": 400,
  "detail": "ูุฌุจ ุฃู ูููู ุงูุณุนุฑ ุฃุนูู ุจูุณุจุฉ 10% ุนูู ุงูุฃูู ูู ุณุนุฑ ุงูุชูููุฉ",
  "instance": "/api/products",
  "errorCode": "BAD_REQUEST",
  "timestamp": "2025-10-18T10:30:45.123Z",
  "traceId": "00-abc123-def456-00"
}
```

### **ุฎุทุฃ ุงูุชุนุงุฑุถ (409)**
```json
{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.5.8",
  "title": "ุชุนุงุฑุถ",
  "status": 409,
  "detail": "ุงูููุชุฌ ุจุงุณู 'Laptop Pro' ููุฌูุฏ ุจุงููุนู",
  "instance": "/api/products",
  "errorCode": "CONFLICT",
  "timestamp": "2025-10-18T10:30:45.123Z",
  "traceId": "00-abc123-def456-00"
}
```

### **ุงุณุชุซูุงุก ุบูุฑ ูุนุงูุฌ - ุงูุชุทููุฑ (500)**
```json
{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.6.1",
  "title": "ุฎุทุฃ ุฏุงุฎูู ูู ุงูุฎุงุฏู",
  "status": 500,
  "detail": "ูู ูุชู ุชุนููู ูุฑุฌุน ุงููุงุฆู ุฅูู ูุซูู ูุงุฆู.",
  "instance": "/api/products",
  "errorCode": "INTERNAL_SERVER_ERROR",
  "timestamp": "2025-10-18T10:30:45.123Z",
  "traceId": "00-abc123-def456-00",
  "exceptionType": "NullReferenceException",
  "stackTrace": "at ExceptionHandlingApi.Services.ProductService.GetAllProductsAsync()..."
}
```

### **ุงุณุชุซูุงุก ุบูุฑ ูุนุงูุฌ - ุงูุฅูุชุงุฌ (500)**
```json
{
  "type": "https://datatracker.ietf.org/doc/html/rfc7231#section-6.6.1",
  "title": "ุฎุทุฃ ุฏุงุฎูู ูู ุงูุฎุงุฏู",
  "status": 500,
  "detail": "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ูุนุงูุฌุฉ ุทูุจู.",
  "instance": "/api/products",
  "errorCode": "INTERNAL_SERVER_ERROR",
  "timestamp": "2025-10-18T10:30:45.123Z",
  "traceId": "00-abc123-def456-00"
}
```

## ๐งช ุงุฎุชุจุงุฑ ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช

### **ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ**

1. **ุฎุทุฃ ุงูุชุญูู** - ุงุณู ููุชุฌ ูุงุฑุบ
```http
POST https://localhost:7xxx/api/products
Content-Type: application/json

{
  "name": "",
  "price": -10,
  "category": ""
}
```

2. **ุบูุฑ ููุฌูุฏ** - ูุนุฑู ููุชุฌ ุบูุฑ ุตุงูุญ
```http
GET https://localhost:7xxx/api/products/99999
```

3. **ุงูุชูุงู ูุงุนุฏุฉ ุงูุนูู** - ูุงูุด ุฑุจุญ ููุฎูุถ
```http
POST https://localhost:7xxx/api/products
Content-Type: application/json

{
  "name": "ููุชุฌ ุชุฌุฑูุจู",
  "price": 100,
  "costPrice": 95,
  "category": "ุงุฎุชุจุงุฑ"
}
```

4. **ุชุนุงุฑุถ** - ุงุณู ููุชุฌ ููุฑุฑ
```http
POST https://localhost:7xxx/api/products
Content-Type: application/json

{
  "name": "Laptop Pro",
  "price": 1200,
  "costPrice": 800,
  "category": "ุฅููุชุฑูููุงุช"
}
```

5. **ุฅูุดุงุก ุฌูุงุนู ูุน ุงูุชุญูู**
```http
POST https://localhost:7xxx/api/products/bulk-create
Content-Type: application/json

[
  {
    "name": "ููุชุฌ 1",
    "price": 100
  },
  {
    "name": "ููุชุฌ 1",
    "price": 100
  }
]
```

## ๐ ุงูููุงุฆุฏ ุงูุฑุฆูุณูุฉ

### **1. ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุฑูุฒูุฉ**
- โ ุฌููุน ุงูุงุณุชุซูุงุกุงุช ูุนุงูุฌุฉ ูู ููุงู ูุงุญุฏ
- โ ูุง ุชูุฌุฏ ูุชู try-catch ูู ุงููุชุญููุงุช
- โ ุชูุณูู ุงุณุชุฌุงุจุฉ ุฎุทุฃ ูุชุณู
- โ ุณูู ุงูุตูุงูุฉ ูุงูุชูุณูุน

### **2. ุงูุชูุงูู ูุน RFC 7807**
- โ ุชูุณูู ุชูุงุตูู ุงููุดููุฉ ุงูููุงุณู
- โ ุงุณุชุฌุงุจุงุช ุฎุทุฃ ูุงุจูุฉ ูููุฑุงุกุฉ ุขููุงู
- โ ุชูุงูู ุฃูุถู ููุนููู
- โ ุฃูุถู ููุงุฑุณุงุช ุงูุตูุงุนุฉ

### **3. ูุชุญููุงุช ูุธููุฉ**
- โ ูุชุญููุงุช ูุญููุฉ ุจุฏูู ููุทู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช
- โ ุงูุชุฑููุฒ ุนูู ูุฎุงูู HTTP ููุท
- โ ูุงุจููุฉ ูุฑุงุกุฉ ูุตูุงูุฉ ุฃูุถู

### **4. ุงูุชุญูู ูู ุทุจูุฉ ุงูุฎุฏูุฉ**
- โ ููุทู ุชุญูู ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- โ ูุนูู ุนุจุฑ ููุงุท ุฏุฎูู ูุฎุชููุฉ (RESTุ gRPCุ ุฅูุฎ.)
- โ ูุตู ุฃูุถู ูููุฎุงูู
- โ ุฃุณูู ููุงุฎุชุจุงุฑ

### **5. ุงููุนู ุจุงูุจูุฆุฉ**
- โ ูุนูููุงุช ุฎุทุฃ ููุตูุฉ ูู ุงูุชุทููุฑ
- โ ุงุณุชุฌุงุจุงุช ูุนููุฉ ูู ุงูุฅูุชุงุฌ
- โ ุฃูุถู ููุงุฑุณุงุช ุงูุฃูุงู

### **6. ุชุณูุณู ุงุณุชุซูุงุกุงุช ููุธู**
- โ ุฃููุงุน ุงุณุชุซูุงุกุงุช ูุงุถุญุฉ ูุณููุงุฑูููุงุช ูุฎุชููุฉ
- โ ุฃููุงุฏ ุญุงูุฉ HTTP ูุฏูุฌุฉ
- โ ุฃููุงุฏ ุฎุทุฃ ูุฎุตุตุฉ ููุนุงูุฌุฉ ุงูุนููู
- โ ูุนุงูุฌุฉ ุงุณุชุซูุงุกุงุช ุขููุฉ ูู ุญูุซ ุงูููุน

## ๐ง ุชุดุบูู ุงููุดุฑูุน

```bash
cd ExceptionHandlingApi
dotnet restore
dotnet run
```

**Swagger UI**: `https://localhost:7xxx/swagger`
**Products API**: `https://localhost:7xxx/api/products`

## ๐ฏ ุงูููุงุท ุงูุฑุฆูุณูุฉ

1. **ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช ุงูุดุงููุฉ**: ุงุณุชุฎุฏู `IExceptionHandler` ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุฑูุฒูุฉ
2. **RFC 7807**: ุงุชุจุน ุชูุณูู ุชูุงุตูู ุงููุดููุฉ ุงูููุงุณู ูุฃุฎุทุงุก API
3. **ุงูุงุณุชุซูุงุกุงุช ุงููุฎุตุตุฉ**: ุฅูุดุงุก ุชุณูุณู ุงุณุชุซูุงุกุงุช ููุธู ูุน ุฃููุงุฏ ุงูุญุงูุฉ
4. **ุณูุณูุฉ ุงููุนุงูุฌ**: ุชุณุฌูู ุงููุนุงูุฌุงุช ูู ุงูุฃูุซุฑ ุชุญุฏูุฏุงู ุฅูู ุงูุฃูุซุฑ ุนููููุฉ
5. **ุงูุชุญูู ูู ุงูุฎุฏูุฉ**: ููู ููุทู ุงูุชุญูู ูู ุงููุชุญููุงุช ุฅูู ุงูุฎุฏูุงุช
6. **ุงููุนู ุจุงูุจูุฆุฉ**: ุฅุธูุงุฑ ุฃุฎุทุงุก ููุตูุฉ ูู ุงูุชุทููุฑุ ูุนููุฉ ูู ุงูุฅูุชุงุฌ
7. **ูุชุญููุงุช ูุธููุฉ**: ุญุงูุธ ุนูู ุงููุชุญููุงุช ูุญููุฉ ููุฑูุฒุฉ ุนูู ูุฎุงูู HTTP

## โก๏ธ ุงูุฎุทูุฉ ุงูุชุงููุฉ

**ูู ุจุชูุณูุน ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช ูุฐู ูุน:**
- **ุชูุงูู ุงูุชุณุฌูู** - ุชุณุฌูู ุงูุงุณุชุซูุงุกุงุช ูู ููู ุฃู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ุณุญุงุจุฉ
- **ุชุชุจุน ุงูุฃุฎุทุงุก** - ุงูุชูุงูู ูุน Sentryุ Application Insightsุ ุฅูุฎ.
- **ุตูุญุงุช ุฎุทุฃ ูุฎุตุตุฉ** - ุตูุญุงุช ุฎุทุฃ ูุฏูุฉ ูุชุทุจููุงุช ุงูููุจ
- **ุงุณุชุซูุงุกุงุช ุชุญุฏูุฏ ุงููุนุฏู** - ูุนุงูุฌุฉ 429 Too Many Requests
- **ูุงุทุน ุงูุฏุงุฆุฑุฉ** - ูุนุงูุฌุฉ ุนุฏู ุชููุฑ ุงูุฎุฏูุฉ ุจุฃูุงู
- **ุณูุงุณุงุช ุฅุนุงุฏุฉ ุงููุญุงููุฉ** - ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ูุน Polly

---

**๐ก ูุตูุญุฉ ุงุญุชุฑุงููุฉ**: ุชุญูู ุฏุงุฆูุงู ูู ุทุจูุฉ ุงูุฎุฏูุฉุ ูููุณ ูู ุงููุชุญููุงุช. ูุฐุง ูุฌุนู ุงูุชุญูู ูุงุจูุงู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ุนุจุฑ ููุงุท ุฏุฎูู ูุฎุชููุฉ ูุฃุณูู ููุงุฎุชุจุงุฑ!
